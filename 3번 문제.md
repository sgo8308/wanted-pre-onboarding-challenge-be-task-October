# 웹 브라우저에 네이버 를 검색하고 화면에 네이버 화면이 출력이 될 때 까지 내부적으로 어떤 동작들이 수행이 되는지 설명해주세요.

1. 네이버의 IP를 알아내기 위해 DNS Lookup을 진행한다. 이 때 브라우저, OS, 라우터, ISP의 DNS Recursor 순으로 DNS cache를 뒤지고 캐시에 네이버 IP가 존재하지 않는다면 재귀적으로 계층화된 DNS Server를 컨택해서 IP를 알아낸다.
2. 알아낸 IP를 가진 호스트와 TCP 3 way handshake 과정을 거쳐서 논리적인 연결을 수립한다.
3. 브라우저는 HTTP Message를 작성하고 작성된 메시지는 OSI 7계층을 위에서부터 아래로 내려가며 각 계층의 기능을 수행 할 헤더가 붙는다.
4. 이 때 2계층에서 어떤 곳으로 가야할지 MAC 주소를 알아내야 한다. 네이버는 외부 IP이기 때문에 디폴트 게이트웨이의 MAC 주소를 설정한다. 디폴트 게이트웨이의 MAC 주소가 없다면 ARP를 수행해서 알아낸다.
5. 1계층을 지나 전기 신호로 변환된 패킷은 스위치를 지나 게이트웨이에 도착한다. 
6. 게이트웨이에서는 패킷을 3계층까지 unpack해서 IP 주소를 확인하고, 라우팅 테이블을 이용하여 다음으로 보내야 할 IP를 알아낸다. 이 IP에 맞는 MAC 주소를 ARP Cache Table에서 뒤져서 알아낸 후 이를 이용해 다음 라우터로 패킷을 다시 감싸 보낸다.
7. 이런 방식으로 라우터와 라우터를 거쳐서 네이버 서버의 로드 밸런서로 도착한다.
8. 로드 밸런서에서는 방화벽이 미리 설정된 보안 규칙에 따라 패킷을 검사한 후 로드 밸런싱 알고리즘에 따라 적절한 네이버의 서버로 패킷을 보낸다.
9. 선택된 서버로 패킷이 들어오면 운영체제의 프로토콜 스택에 의해 패킷은 4계층까지 unpack이 된다.
10. 4계층에서 포트를 확인하고, ip와 포트를 조합하여 해당하는 소켓을 알아낸 후 이 소켓으로 패킷을 보낸다.
11. 네이버의 서버 어플리케이션은 소켓을 통해 데이터를 전달 받고, HTTP 메시지를 적절히 처리한 후 네이버 홈 화면의 Html데이터를 담은 HTTP 응답 메시지를 생성한다.
12. 올 때와 동일한 방식으로 사용자의 컴퓨터로 데이터가 전달되고 브라우저는 Html을 렌더링하여 화면에 출력한다.
